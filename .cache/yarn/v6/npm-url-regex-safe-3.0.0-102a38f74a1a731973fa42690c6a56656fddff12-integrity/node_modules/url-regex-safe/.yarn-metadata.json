{
  "manifest": {
    "name": "url-regex-safe",
    "description": "Regular expression matching for URL's. Maintained, safe, and browser-friendly version of url-regex. Resolves CVE-2020-7661. Works in Node v10.12.0+ and browsers.",
    "version": "3.0.0",
    "author": {
      "name": "Nick Baugh",
      "email": "niftylettuce@gmail.com",
      "url": "http://niftylettuce.com/"
    },
    "browser": {
      "re2": false
    },
    "bugs": {
      "url": "https://github.com/niftylettuce/url-regex-safe/issues",
      "email": "niftylettuce@gmail.com"
    },
    "contributors": [
      {
        "name": "Nick Baugh",
        "email": "niftylettuce@gmail.com",
        "url": "http://niftylettuce.com/"
      },
      {
        "name": "Kevin Mårtensson",
        "email": "kevinmartensson@gmail.com"
      },
      {
        "name": "Diego Perini"
      }
    ],
    "dependencies": {
      "ip-regex": "4.3.0",
      "tlds": "^1.228.0"
    },
    "peerDependencies": {
      "re2": "^1.17.2"
    },
    "peerDependenciesMeta": {
      "re2": {
        "optional": true
      }
    },
    "devDependencies": {
      "@babel/cli": "^7.16.7",
      "@babel/core": "^7.16.7",
      "@babel/preset-env": "^7.16.7",
      "@commitlint/cli": "latest",
      "@commitlint/config-conventional": "latest",
      "ava": "latest",
      "babelify": "^10.0.0",
      "browserify": "^17.0.0",
      "codecov": "latest",
      "cross-env": "latest",
      "eslint": "latest",
      "eslint-config-xo-lass": "latest",
      "eslint-plugin-compat": "^4.0.0",
      "eslint-plugin-node": "^11.1.0",
      "fixpack": "latest",
      "husky": "latest",
      "jsdom": "15",
      "lint-staged": "latest",
      "nyc": "latest",
      "re2": "latest",
      "remark-cli": "latest",
      "remark-preset-github": "latest",
      "tinyify": "^3.0.0",
      "xo": "latest"
    },
    "engines": {
      "node": ">= 10.12.0"
    },
    "files": [
      "lib",
      "dist"
    ],
    "homepage": "https://github.com/niftylettuce/url-regex-safe",
    "jsdelivr": "dist/url-regex-safe.min.js",
    "keywords": [
      "2020",
      "7661",
      "CVE-2020-7661",
      "cve",
      "detect",
      "email",
      "emails",
      "expresion",
      "expression",
      "from",
      "get",
      "html",
      "mail",
      "mails",
      "maintained",
      "parse",
      "parser",
      "parsing",
      "regex",
      "regexer",
      "regexer",
      "regexes",
      "regexing",
      "regexp",
      "safe",
      "scan",
      "sniff",
      "str",
      "string",
      "text",
      "url",
      "urls"
    ],
    "license": "MIT",
    "main": "lib/index.js",
    "repository": {
      "type": "git",
      "url": "https://github.com/niftylettuce/url-regex-safe"
    },
    "scripts": {
      "ava": "cross-env NODE_ENV=test ava",
      "browserify": "browserify src/index.js -o dist/url-regex-safe.js -s urlRegexSafe -g [ babelify --configFile ./.dist.babelrc ]",
      "build": "npm run build:clean && npm run build:lib && npm run build:dist",
      "build:clean": "rimraf lib dist",
      "build:dist": "npm run browserify && npm run minify",
      "build:lib": "babel --config-file ./.lib.babelrc src --out-dir lib",
      "coverage": "nyc report --reporter=text-lcov > coverage.lcov && codecov",
      "lint": "yarn run lint:js && yarn run lint:md && yarn run lint:lib && yarn run lint:dist",
      "lint:dist": "eslint --no-inline-config -c .dist.eslintrc dist",
      "lint:js": "xo",
      "lint:lib": "eslint -c .lib.eslintrc lib",
      "lint:md": "remark . -qfo",
      "minify": "cross-env NODE_ENV=production browserify src/index.js -o dist/url-regex-safe.min.js -s urlRegexSafe -g [ babelify --configFile ./.dist.babelrc ] -p tinyify",
      "nyc": "cross-env NODE_ENV=test nyc ava",
      "pretest": "yarn run build && yarn run lint",
      "test": "cross-env NODE_ENV=test ava",
      "test-coverage": "cross-env NODE_ENV=test nyc yarn run test"
    },
    "unpkg": "dist/url-regex-safe.min.js",
    "xo": {
      "prettier": true,
      "space": true,
      "extends": [
        "xo-lass"
      ]
    },
    "_registry": "npm",
    "_loc": "/home/container/.cache/yarn/v6/npm-url-regex-safe-3.0.0-102a38f74a1a731973fa42690c6a56656fddff12-integrity/node_modules/url-regex-safe/package.json",
    "readmeFilename": "README.md",
    "readme": "# url-regex-safe\n\n[![build status](https://img.shields.io/travis/com/niftylettuce/url-regex-safe.svg)](https://travis-ci.com/niftylettuce/url-regex-safe)\n[![code coverage](https://img.shields.io/codecov/c/github/niftylettuce/url-regex-safe.svg)](https://codecov.io/gh/niftylettuce/url-regex-safe)\n[![code style](https://img.shields.io/badge/code_style-XO-5ed9c7.svg)](https://github.com/sindresorhus/xo)\n[![styled with prettier](https://img.shields.io/badge/styled_with-prettier-ff69b4.svg)](https://github.com/prettier/prettier)\n[![made with lass](https://img.shields.io/badge/made_with-lass-95CC28.svg)](https://lass.js.org)\n[![license](https://img.shields.io/github/license/niftylettuce/url-regex-safe.svg)](LICENSE)\n[![npm downloads](https://img.shields.io/npm/dt/url-regex-safe.svg)](https://npm.im/url-regex-safe)\n\n> Regular expression matching for URL's. Maintained, safe, and browser-friendly version of [url-regex][]. Resolves [CVE-2020-7661][cve] for Node.js servers. Works in Node v10.12.0+ and browsers.\n\n\n## Table of Contents\n\n* [Foreword](#foreword)\n* [Install](#install)\n* [Usage](#usage)\n  * [Node](#node)\n  * [Browser](#browser)\n* [Options](#options)\n* [Quick tips and migration from url-regex](#quick-tips-and-migration-from-url-regex)\n* [Limitations](#limitations)\n* [Contributors](#contributors)\n* [License](#license)\n\n\n## Foreword\n\nAfter discovering [CVE-2020-7661][cve] and disclosing it [publicly](https://portswigger.net/daily-swig/unpatched-regex-bug-leaves-node-js-apps-open-to-redos-attacks) (through my work on [Spam Scanner][spam-scanner] and [Forward Email][forward-email]) – I used an implementation of [url-regex][] with some extra glue on top to filter out bad URL matches.\n\nHowever after using it on [Forward Email][forward-email] in production (which processes hundreds of thousands of emails per week), I found and documented several more [core issues](https://github.com/kevva/url-regex/pull/35) with [url-regex][].\n\nRealizing that [url-regex][] is no longer actively maintained, has 9 open pull requests as of this writing, and also lacked browser support – I decided to write this package for everyone and merge all the open pull requests.\n\nThis package should hopefully more closely resemble real-world intended usage of a URL regular expression, and also allowing the user to configure it as they wish.  Please check out [Forward Email][forward-email] if this package helped you, and explore our source code on GitHub which shows how we use this package.\n\n\n## Install\n\n**NOTE:** As of v3.0.0 you must also install `re2` as a peer dependency.\n\n[npm][]:\n\n```sh\nnpm install url-regex-safe re2\n```\n\n[yarn][]:\n\n```sh\nyarn add url-regex-safe re2\n```\n\n\n## Usage\n\n### Node\n\nWe've resolved [CVE-2020-7661][cve] by including [RE2][] for Node.js usage.  You will not have to manually wrap your URL regular expressions with `new RE2(urlRegex())` anymore through `url-regex-safe` (we do it automatically for you).\n\n```js\nconst urlRegexSafe = require('url-regex-safe');\n\nconst str = 'some long string with url.com in it';\nconst matches = str.match(urlRegexSafe());\n\nfor (const match of matches) {\n  console.log('match', match);\n}\n\nconsole.log(urlRegexSafe({ exact: true }).test('github.com'));\n```\n\n### Browser\n\nSince [RE2][] is not made for the browser, it will not be used, and therefore [CVE-2020-7661][cve] is still an issue on the client-side. However it is not severe since the most it would do is crash the browser tab (as on the Node.js side it would have crashed the entire process and thrown an out of memory exception).\n\n#### VanillaJS\n\nThis is the solution for you if you're just using `<script>` tags everywhere!\n\n```html\n<script src=\"https://unpkg.com/url-regex-safe\"></script>\n<script type=\"text/javascript\">\n  (function() {\n    var str = 'some long string with url.com in it';\n    var matches = str.match(urlRegexSafe());\n\n    for (var i=0; i<matches.length; i++) {\n      console.log('match', matches[i]);\n    }\n\n    console.log(urlRegexSafe({ exact: true }).test('github.com'));\n  })();\n</script>\n```\n\n#### Bundler\n\nAssuming you are using [browserify][], [webpack][], [rollup][], or another bundler, you can simply follow [Node](#node) usage above.\n\n#### TypeScript\n\nTo use this package with [TypeScript](https://www.typescriptlang.org/), you can install the [`@types/url-regex-safe`](https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/url-regex-safe) package for type definitions.\n\n```sh\nnpm install --save-dev @types/url-regex-safe\n```\n\n\n## Options\n\n| Property         | Type    | Default Value                                                | Description                                                                                                                                                                                                                                                                                                                                                    |   |\n| ---------------- | ------- | ------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | - |\n| `exact`          | Boolean | `false`                                                      | Only match an exact String. Useful with `regex.test(str)` to check if a String is a URL. We set this to `false` by default in order to match String values such as `github.com` (as opposed to requiring a protocol or `www` subdomain).  We feel this closely more resembles real-world intended usage of this package.                                       |   |\n| `strict`         | Boolean | `false`                                                      | Force URL's to start with a valid protocol or `www` if set to `true`. If `true`, then it will allow any TLD as long as it is a minimum of 2 valid characters. If it is `false`, then it will match the TLD against the list of valid TLD's using [tlds](https://github.com/stephenmathieson/node-tlds#readme).                                                 |   |\n| `auth`           | Boolean | `false`                                                      | Match against Basic Authentication headers. We set this to `false` by default since [it was deprecated in Chromium](https://bugs.chromium.org/p/chromium/issues/detail?id=82250#c7), and otherwise it leaves the user with unwanted URL matches (more closely resembles real-world intended usage of this package by having it set to `false` by default too). |   |\n| `localhost`      | Boolean | `true`                                                       | Allows localhost in the URL hostname portion. See the [test/test.js](test/test.js) for more insight into the localhost test and how it will return a value which may be unwanted. A pull request would be considered to resolve the \"pic.jp\" vs. \"pic.jpg\" issue.                                                                                              |   |\n| `parens`         | Boolean | `false`                                                      | Match against Markdown-style trailing parenthesis. We set this to `false` because it should be up to the user to parse for Markdown URL's.                                                                                                                                                                                                                     |   |\n| `apostrophes`    | Boolean | `false`                                                      | Match against apostrophes. We set this to `false` because we don't want the String `background: url('http://example.com/pic.jpg');` to result in `http://example.com/pic.jpg'`.  See this [issue](https://github.com/kevva/url-regex/pull/55) for more information.                                                                                            |   |\n| `trailingPeriod` | Boolean | `false`                                                      | Match against trailing periods. We set this to `false` by default since real-world behavior would want `example.com` versus `example.com.` as the match (this is different than [url-regex][] where it matches the trailing period in that package).                                                                                                           |   |\n| `ipv4`           | Boolean | `true`                                                       | Match against IPv4 URL's.                                                                                                                                                                                                                                                                                                                                      |   |\n| `ipv6`           | Boolean | `true`                                                       | Match against IPv6 URL's.                                                                                                                                                                                                                                                                                                                                      |   |\n| `tlds`           | Array   | [tlds](https://github.com/stephenmathieson/node-tlds#readme) | Match against a specific list of tlds, or the default list provided by [tlds](https://github.com/stephenmathieson/node-tlds#readme).                                                                                                                                                                                                                           |   |\n| `returnString`   | Boolean | `false`                                                      | Return the RegExp as a String instead of a `RegExp` (useful for custom logic, such as we did with [Spam Scanner][spam-scanner]).                                                                                                                                                                                                                               |   |\n\n\n## Quick tips and migration from url-regex\n\nYou must override the default and set `strict: true` if you do not wish to match `github.com` by itself (though `www.github.com` will work if `strict: false`).\n\nUnlike the deprecated and unmaintained package [url-regex][], we do a few things differently:\n\n* We set `strict` to `false` by default ([url-regex][] had this set to `true`)\n* We added an `auth` option, which is set to `false` by default ([url-regex][] matches against Basic Authentication; had this set to `true` - however this is a deprecated behavior in Chromium).\n* We added `parens` and `ipv6` options, which are set to `false` and `true` by default ([url-regex][] had `parens` set to `true` and `ipv6` was non-existent or set to `false` rather).\n* We added an `apostrophe` option, which is set to `false` by default ([url-regex][] had this set to `true`).\n* We added a `trailingPeriod` option, which is set to `false` by default (which means matches won't contain trailing periods, whereas [url-regex][] had this set to `true`).\n\n\n## Limitations\n\nSince we cannot use regular expression's \"negative lookbehinds\" functionality (due to [RE2][] limitations), we could not merge the logic from this [pull request](https://github.com/kevva/url-regex/pull/67/commits/6c31d81c35c3bb72c413c6e4af92a37b2689ead2).  This would have allowed us to make it so `example.jpeg` would match only if it was `example.jp`, however if you pass `example.jpeg` right now it will extract `example.jp` from it (since `.jp` is a TLD).  An alternative solution may exist, and we welcome community contributions regarding this issue.\n\n\n## Contributors\n\n| Name                 | Website                    |\n| -------------------- | -------------------------- |\n| **Nick Baugh**       | <http://niftylettuce.com/> |\n| **Kevin Mårtensson** |                            |\n| **Diego Perini**     |                            |\n\n\n## License\n\n[MIT](LICENSE) © [Nick Baugh](http://niftylettuce.com/)\n\n\n##\n\n[npm]: https://www.npmjs.com/\n\n[yarn]: https://yarnpkg.com/\n\n[cve]: https://nvd.nist.gov/vuln/detail/CVE-2020-7661\n\n[re2]: https://github.com/uhop/node-re2\n\n[browserify]: https://github.com/browserify/browserify\n\n[webpack]: https://github.com/webpack/webpack\n\n[rollup]: https://github.com/rollup/rollup\n\n[url-regex]: https://github.com/kevva/url-regex\n\n[spam-scanner]: https://spamscanner.net\n\n[forward-email]: https://forwardemail.net\n",
    "licenseText": "MIT License\n\nCopyright (c) 2020 Nick Baugh <niftylettuce@gmail.com> (http://niftylettuce.com/), Kevin Mårtensson <kevinmartensson@gmail.com>, and Diego Perini\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.yarnpkg.com/url-regex-safe/-/url-regex-safe-3.0.0.tgz#102a38f74a1a731973fa42690c6a56656fddff12",
    "type": "tarball",
    "reference": "https://registry.yarnpkg.com/url-regex-safe/-/url-regex-safe-3.0.0.tgz",
    "hash": "102a38f74a1a731973fa42690c6a56656fddff12",
    "integrity": "sha512-+2U40NrcmtWFVjuxXVt9bGRw6c7/MgkGKN9xIfPrT/2RX0LTkkae6CCEDp93xqUN0UKm/rr821QnHd2dHQmN3A==",
    "registry": "npm",
    "packageName": "url-regex-safe",
    "cacheIntegrity": "sha512-+2U40NrcmtWFVjuxXVt9bGRw6c7/MgkGKN9xIfPrT/2RX0LTkkae6CCEDp93xqUN0UKm/rr821QnHd2dHQmN3A== sha1-ECo490oacxlz+kJpDGpWZW/d/xI="
  },
  "registry": "npm",
  "hash": "102a38f74a1a731973fa42690c6a56656fddff12"
}